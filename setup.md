# HARDHAT SETUP

//HARDHAT REQUIRES LOWERCASE PROJECT NAMES???

>npm init -y  //package.json

>npm install --save-dev hardhat

//creates node-modules and package.lock (commit package.lock)

>npx hardhat

> CREATE JAVASCRIPT PROJECT (very important)
- adds .gitignore
- adds README
- adds folders /contracts/scripts/test/ with EXAMPLES.
- adds hardhat.config

//RUN THESE from CMD not VSCODE. COPY AND PASTE works in CMD not VSCODE (success)
You need to install these dependencies to run the sample project:
  npm install --save-dev "hardhat@^2.11.1" "@nomicfoundation/hardhat-toolbox@^2.0.0" "@nomicfoundation/hardhat-network-helpers@^1.0.0" "@nomicfoundation/hardhat-chai-matchers@^1.0.0" "@nomiclabs/hardhat-ethers@^2.0.0" "@nomiclabs/hardhat-etherscan@^3.0.0" "chai@^4.2.0" "ethers@^5.4.7" "hardhat-gas-reporter@^1.0.8" "solidity-coverage@^0.8.0" "@typechain/hardhat@^6.1.2" "typechain@^8.1.0" "@typechain/ethers-v5@^10.1.0" "@ethersproject/abi@^5.4.7" "@ethersproject/providers@^5.4.7"


> npx hardhat test  //9 PASS - do not type npx run test!!!

> npm install --save @nomiclabs/hardhat-waffle

> npm install --save @openzeppelin/contracts

// HARDHAT SETUP is always a pain... 
// https://hardhat.org/hardhat-runner/docs/guides/project-setup
// https://hardhat.org/hardhat-runner/docs/config#networks-configuration
// https://hardhat.org/hardhat-runner/docs/guides/test-contracts

CTRL + F5 - compile all hotkey //didnt work DO NOT INSTALL SOLIDITY DEBUGGER (Meadow) (requires .NET)

> npx hardhat compile  //compile all

#SETUP MUMBAI

(spaces added to avoid bots scanning)
npm install dot e n v --save    

//create .e n v file
API_URL = "https://eth-goerli.g.alchemy.com/v2/your-api-k e y"
P R IVATE_K E Y = "your-m e tamask-p r ivate-k e y"
//M e taMask P r ivate K e y is no joke. Do not commit.
//From M e taMask > Account Details > Export P r ivate K e y > pwd!
Check .gitignore and add .e n v* because nextjs has .e n v.local

//SPACES ADDED
```
require("@nomicfoundation/hardhat-toolbox");

/** @type import('hardhat/config').HardhatUserConfig */

require("dote n v").config();
require("@nomiclabs/hardhat-waffle");
require("@nomiclabs/hardhat-etherscan");

module.exports = {
  solidity: "0.8.17",
  networks: {
    mumbai: {
      url: process.e n v.TESTNET_RPC,
      accounts: [process.e n v.P R IVATE_K E Y]
    },
  },
  etherscan: {
    apiK e y: process.e n v.POLYGONSCAN_API_K E Y
  }
};
```

> npx hardhat run scripts/deploy.js --network mumbai

//wait, console log give 0x, copy to .e n v (not here)
//we use this addr on polygonscan to verify contract (later).

ALSO, can deploy on localhost node (optional)
> npx hardhat node
> npx hardhat run --network localhost scripts/deploy.js

//VERIFY  means make source code public, with compiler settings, which allows anyone to compile
//compare generated bytecode with the one that is deployed on-chain. Ensuring same contract.

> npx hardhat verify --network mumbai 0x9A9A1D... //error no params provided
//need to add parameter "" after address
// https://hardhat.org/hardhat-runner/plugins/nomiclabs-hardhat-etherscan
// Look in deploy.js it passed in a TIMESTAMP so Verify needs exact same.
// The console.log of deploy 0x important - but also the exact PARAMS too!
> npx hardhat verify --network mumbai 0x31c 1707715497
// 17077.. is the TIMESTAMP
Successfully submitted source code for contract
contracts/Lock.sol:Lock at 0x31cC...
for verification on the block explorer. 
Successfully verified contract Lock on Etherscan.
https://mumbai.polygonscan.com/address/0x31cC...#code
Copy that URL to .e n v   go to that LINK, REVIEW and TEST.

TEST: review public variables, connect wallet and call withdraw. Contract balance 1 MATIC.
//Fail with error 'You cant withdraw yet' : cant withdraw for 1 year!!!
NOTES: it included console.log!!! 
HOW TO FIX?
1) code changes: remove logs, add event, test...
2) deploy: new addr, new timestamp, copy both to E N V.
3) verify: success - gives new link.
4) review: check changes.

COMMIT to GITHUB: 9 tests passing, Lock.sol compiling, deployed twice. Withdraw later?


## DEV CYCLE

//RUN SINGLE TEST FILE
> npx hardhat test ./test/PirateNinja.test.js

//RUN SINGLE COMPILE FILE (not possible)
> npx hardhat compile ./contracts/PirateNinja.sol //error 

//cool thing
> npx hardhat --help
> npx hardhat coverage //generates /coverage and instanbul test coverage data


# Sample Hardhat Project

This project demonstrates a basic Hardhat use case. It comes with a sample contract, a test for that contract, and a script that deploys that contract.

Try running some of the following tasks:

```shell
npx hardhat help
npx hardhat test
REPORT_GAS=true npx hardhat test
npx hardhat node
npx hardhat run scripts/deploy.js
```
